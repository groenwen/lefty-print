import{e as m}from"./emitter.2ccbb68b.js";import{S as k}from"./ServiceTemp.7e1618df.js";import{S as z}from"./SweetAlert.d9c235c1.js";import{_ as L,r as f,o as c,b as l,e as _,d as s,t as o,z as A,F as g,v as b,f as u,n as a,A as P,w as C}from"./index.09b44046.js";import{_ as N}from"./card_img.f69fa5f3.js";const V="/lefty-print/assets/demo.235fb3b5.jpg";const q={data(){return{isLoading:!1,VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",currProd:{},currProds:[],sortProds:[],currSize:"",currSide:"",carts:[],sizeList:[],sideList:[],file:{},fileName:""}},computed:{prodId(){return this.$route.params.id}},watch:{prodId(){this.getProds()}},components:{ServiceTemp:k,SweetAlert:z},methods:{getProds(){this.isLoading=!0;const d=`${this.VUE_APP}/products/all`;this.$http.get(d).then(i=>{this.isLoading=!1;const t=i.data.products;this.currProd=t.find(n=>n.id===this.prodId),this.currSize=`${this.currProd.width}x${this.currProd.height}`,this.currSide=this.currProd.side,this.currProds=t.filter(n=>n.title===this.currProd.title),this.showSizeAndSide(),this.getSortProds()}).catch(i=>{m.emit("sweetalert",`${i.response.data.message}, error`)})},checkSizeAndSide(d,i){if(d==="size"){const t=i.split("x");this.currSize=`${t[0]}x${t[1]}`}else d==="side"&&(this.currSide=i);this.getSortProds(),this.currProd={...this.sortProds[0]},this.$router.push(`/product/${this.currProd.id}`)},getSortProds(){const d=this.currProds.filter((t,n)=>{const e=this.currSize.split("x");return t.width===Number(e[0])&&t.height===Number(e[1])&&t.side===this.currSide}),i=d.map((t,n)=>({index:n,value:t}));i.sort((t,n)=>t.value.p_qty>n.value.p_qty?1:t.value.p_qty<n.value.p_qty?-1:0),this.sortProds=i.map(t=>d[t.index])},showSizeAndSide(){const d=this.currProds.map(t=>`${t.width}x${t.height}`),i=this.currProds.map(t=>t.side);this.sizeList=d.filter((t,n)=>d.indexOf(t)===n),this.sizeList.sort(),this.sideList=i.filter((t,n)=>i.indexOf(t)===n),this.sideList.sort()},shallowEqual(d,i){const t=Object.keys(d),n=Object.keys(i);if(t.length!==n.length)return!1;for(let e=0;e<=t.length;e++){const h=d[t[e]],p=i[n[e]];if(h!==p)return!1}return!0},addToCart(){this.isLoading=!0;const d=`${this.VUE_APP}/cart`;this.$http.post(d,{data:{product_id:this.currProd.id,qty:1,files:[{id:0,front:V}]}}).then(i=>{this.isLoading=!1,m.emit("cartCount"),m.emit("sweetalert",`${i.data.message}, success`)}).catch(i=>{this.isLoading=!1,m.emit("sweetalert",`${i.response.data.message}, error`)})},choseFile(d){this.file=d.target.files[0],this.fileName=this.file.name}},mounted(){this.getProds()}},$={class:"mb-5 bg-gray100"},F={class:"container px-4 px-md-0 py-5 py-sm-4"},T={class:"row justify-content-between align-items-center"},E={class:"order-md-1 order-2 col-md-5 col-12"},I={class:"mb-4 d-inline-block px-3 py-2 fs-8 lh-1 text-primary bg-light rounded-pill"},j={class:"mb-4 fw-bolder fs-2"},O={class:"mb-4 text-secondary"},U={class:"d-flex align-items-center text-primary"},B=s("span",{class:"material-symbols-sharp fs-2 me-3"},"calendar_month",-1),D={class:"lh-1"},M={class:"order-md-2 order-1 col-md-5 col-12"},G=s("img",{class:"img-fluid",src:N,alt:""},null,-1),H=[G],J={class:"container"},K={class:"row justify-content-center"},Q={class:"col-lg-10"},R={class:"mb-5"},W=s("span",{class:"me-3 mb-1 fs-7 text-secondary"},"\u5C3A\u5BF8\u2003\xA0",-1),X=["onClick"],Y={class:"mb-5"},Z=s("span",{class:"me-3 mb-1 fs-7 text-secondary"},"\u55AE/\u96D9\u9762",-1),ss=["onClick"],ts={class:"mb-5 position-relative",style:{"min-height":"100px"}},es={class:"border border-light bg-gray100 px-md-4 px-2 py-3"},rs={class:"table table-borderless table-hover text-center"},is=s("thead",null,[s("tr",{class:"text-secondary fs-7"},[s("th",{class:"text-start ps-md-4 fw-normal",width:"16%"},"\u5C3A\u5BF8"),s("th",{class:"fw-normal",width:"16%"},"\u55AE / \u96D9\u9762"),s("th",{class:"fw-normal"},"\u6750\u8CEA"),s("th",{class:"fw-normal"},"\u6578\u91CF"),s("th",{class:"fw-normal"},"\u50F9\u683C")])],-1),os={class:"text-start text-secondary ps-md-4"},ds={class:"text-secondary"},ns={class:"mb-5 text-end text-secondary"},cs={class:"mb-5"},ls={for:"formFile",class:"p-4 w-100 text-secondary text-center bg-gray100 border-dash"},as={key:0},hs=s("span",{class:"me-2 material-symbols-sharp fs-1 align-middle"},"cloud_upload",-1),us={key:1},_s=s("span",{class:"me-2 material-symbols-sharp fs-1 align-middle"},"cloud_upload",-1),ps={class:"mb-5 d-flex justify-content-end align-items-center"},ms={class:"text-primary me-5"},fs={class:"fs-2 fw-bold"},gs=s("span",{class:"material-symbols-sharp align-text-bottom"},"shopping_cart",-1),ys={class:"mt-8 py-7 bg-gray200"};function bs(d,i,t,n,e,h){const p=f("v-loading"),v=f("SweetAlert"),x=f("router-link"),w=f("ServiceTemp");return c(),l(g,null,[_(p,{active:e.isLoading},null,8,["active"]),_(v),s("div",$,[s("div",F,[s("div",T,[s("div",E,[s("span",I,o(e.currProd.category),1),s("h1",j,o(e.currProd.title),1),s("p",O,o(e.currProd.content),1),s("div",U,[B,s("span",D,o(e.currProd.description),1)])]),s("div",M,[s("div",{class:"mb-4 mb-md-0 bg-cover h-100",style:A({backgroundImage:`url(${e.currProd.imageUrl})`})},H,4)])])])]),s("div",J,[s("div",K,[s("div",Q,[s("div",R,[W,(c(!0),l(g,null,b(e.sizeList,(r,y)=>(c(),l("a",{href:"#",key:`size${y}`,onClick:P(S=>h.checkSizeAndSide("size",r),["prevent"]),class:a(["btn btn-sm rounded-pill me-3",[this.currSize===r?"btn-dark":"btn-outline-secondary"]])},o(r),11,X))),128))]),s("div",Y,[Z,(c(!0),l(g,null,b(e.sideList,(r,y)=>(c(),l("a",{href:"#",key:`side${y}`,onClick:P(S=>h.checkSizeAndSide("side",r),["prevent"]),class:a(["btn btn-sm rounded-pill me-3",[this.currProd.side===r?"btn-dark":"btn-outline-secondary"]])},o(r),11,ss))),128))]),s("div",ts,[_(p,{active:e.isLoading},null,8,["active"]),s("div",es,[s("table",rs,[is,s("tbody",null,[(c(!0),l(g,null,b(e.sortProds,r=>(c(),l("tr",{key:r.id,class:a([[this.currProd.id===r.id?"bg-light":"bg-white"],"position-relative"])},[s("th",os,o(r.width)+"x"+o(r.height)+"mm",1),s("td",ds,o(r.side),1),s("td",{class:a({"text-primary":this.currProd.id===r.id})},o(r.material),3),s("td",{class:a({"text-primary":this.currProd.id===r.id})},o(r.p_qty)+" "+o(r.unit),3),s("td",{class:a({"text-primary":this.currProd.id===r.id})},[u(" $"),_(x,{to:`/product/${r.id}`,class:a(["fw-bolder stretched-link",{"text-dark":this.currProd.id!==r.id}])},{default:C(()=>[u(o(r.price),1)]),_:2},1032,["to","class"])],2)],2))),128))])])])]),s("p",ns,o(e.currProd.width)+"x"+o(e.currProd.height)+"mm \uFF0F "+o(e.currProd.side)+" \uFF0F "+o(e.currProd.material)+" \uFF0F "+o(e.currProd.p_qty)+" \u5F35",1),s("div",cs,[s("form",null,[s("input",{class:"inputfile",type:"file",id:"formFile",onChange:i[0]||(i[0]=(...r)=>h.choseFile&&h.choseFile(...r))},null,32),s("label",ls,[e.fileName.length<=0?(c(),l("span",as,[hs,u("\u4E0A\u50B3\u6A94\u6848")])):(c(),l("span",us,[_s,u(o(e.fileName),1)]))])])]),s("div",ps,[s("span",ms,[u("NT$ "),s("span",fs,o(e.currProd.price),1)]),s("a",{href:"#",class:a(["btn btn-accent",{disabled:this.file.name===void 0}]),onClick:i[1]||(i[1]=P(r=>h.addToCart(),["prevent"]))},[gs,u(" \u52A0\u5165\u8CFC\u7269\u8ECA ")],2)])])])]),s("div",ys,[_(w),u("> ")])],64)}const ks=L(q,[["render",bs]]);export{ks as default};
