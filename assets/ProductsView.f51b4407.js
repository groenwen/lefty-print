import{_ as g,o as d,a as c,b as t,n as P,y as v,F as b,u as w,t as u,z as r,B as p,C as M,r as m,v as C,d as y,e as k}from"./index.43ab6292.js";import{M as x}from"./modal.ebd45fb9.js";import"./component-functions.1ca906a3.js";const N={props:["pages"],methods:{emitPages(l){console.log("emitPages",l),this.$emit("emitPages",l)}}},$={"aria-label":"Page navigation example"},I={class:"pagination"},L=t("span",{"aria-hidden":"true"},"\xAB",-1),E=[L],q=["onClick"],B=t("span",{"aria-hidden":"true"},"\xBB",-1),D=[B];function A(l,o,n,h,e,a){return d(),c("nav",$,[t("ul",I,[t("li",{class:P(["page-item",{disabled:!n.pages.has_pre}])},[t("a",{class:"page-link",href:"#",onClick:o[0]||(o[0]=v(s=>a.emitPages(n.pages.current_page-1),["prevent"]))},E)],2),(d(!0),c(b,null,w(n.pages.total_pages,s=>(d(),c("li",{class:P(["page-item",{active:n.pages.current_page===s}]),key:s},[t("a",{class:"page-link",href:"#",onClick:v(_=>a.emitPages(s),["prevent"])},u(s),9,q)],2))),128)),t("li",{class:P(["page-item",{disabled:!n.pages.has_next}])},[t("a",{class:"page-link",href:"#",onClick:o[1]||(o[1]=v(s=>a.emitPages(n.pages.current_page+1),["prevent"]))},D)],2)])])}const O=g(N,[["render",A]]),S={data(){return{myModal:"",innIsNew:"",innProduct:{width:90,height:54,side:"single",material:"\u4E00\u7D1A\u5361",p_qty:300,imagesUrl:[]},addImage:""}},props:{isNew:{type:Boolean},productItem:{type:Object}},watch:{isNew(){this.innIsNew=this.isNew},productItem(){this.innProduct=JSON.parse(JSON.stringify(this.productItem))}},methods:{showModal(){this.myModal.show()},hideModal(){this.myModal.hide()},updateProduct(l){this.$emit("updateProduct",l)}},mounted(){this.myModal=new x(this.$refs.productModal),this.innIsNew=this.isNew,this.innProduct=JSON.parse(JSON.stringify(this.productItem))}},J={class:"modal fade",ref:"productModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},z={class:"modal-dialog modal-xl"},F={class:"modal-content"},T={class:"modal-header"},j={key:0,class:"modal-title"},R={key:1,class:"modal-title"},X=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body"},H={class:"row"},K={class:"col-3"},Q={class:"mb-4"},W=t("p",null,"\u4E3B\u5716",-1),Y=["src"],Z=t("p",null,"\u8A73\u7D30\u5716\u7247",-1),tt=["src"],et={class:"input-group mb-3"},ot={class:"col"},st={class:"mb-3"},lt={class:"row mb-3"},nt={class:"col-3"},it=t("label",{for:"category",class:"form-label"},"\u985E\u5225",-1),dt={class:"col-2 align-self-end"},ct=["checked"],at={key:0,class:"form-check-label",for:"is_enabled"},rt={key:1,class:"form-check-label",for:"is_enabled"},ut={class:"row mb-3"},pt={class:"col-6"},ht=t("label",{for:"title",class:"form-label"},"\u7522\u54C1\u540D\u7A31",-1),_t={class:"col-6 align-self-end"},mt={class:"form-check form-check-inline"},bt=t("label",{class:"form-check-label",for:"single"},"\u55AE\u9762",-1),gt={class:"form-check form-check-inline"},ft=t("label",{class:"form-check-label",for:"double"},"\u96D9\u9762",-1),Pt={class:"mb-3"},vt=t("label",{for:"content",class:"form-label"},"\u7522\u54C1\u7C21\u8FF0",-1),yt={class:"mb-3"},kt=t("label",{for:"description",class:"form-label"},"\u7522\u54C1\u4ECB\u7D39",-1),wt=t("div",{class:"my-4 border-top"},null,-1),Mt={class:"row g-2 mb-3"},xt={class:"col-3"},Ut=t("label",{for:"width",class:"form-label"},"\u5BEC(mm)",-1),Vt={class:"col-3"},Ct=t("label",{for:"height",class:"form-label"},"\u9AD8(mm)",-1),Nt={class:"row g-2 mb-3"},$t={class:"col"},It=t("label",{for:"material",class:"form-label"},"\u6750\u8CEA",-1),Lt={class:"col-4"},Et=t("label",{for:"qty",class:"form-label"},"\u6578\u91CF",-1),qt={class:"col-2"},Bt=t("label",{for:"unit",class:"form-label"},"\u55AE\u4F4D",-1),Dt={class:"row g-2 mb-3"},At={class:"col-3"},Ot=t("label",{for:"origin_price",class:"form-label"},"\u539F\u50F9",-1),St={class:"input-group"},Jt=t("span",{class:"input-group-text"},"$",-1),zt={class:"col-3"},Ft=t("label",{for:"price",class:"form-label"},"\u552E\u50F9",-1),Tt={class:"input-group"},jt=t("span",{class:"input-group-text"},"$",-1),Rt={class:"modal-footer"},Xt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function Gt(l,o,n,h,e,a){return d(),c("div",J,[t("div",z,[t("div",F,[t("div",T,[e.innIsNew?(d(),c("h5",j,"\u65B0\u589E\u7522\u54C1")):(d(),c("h5",R,u(e.innProduct.title),1)),X]),t("div",G,[t("div",H,[t("div",K,[t("div",Q,[W,t("img",{class:"img-fluid",src:e.innProduct.imageUrl,alt:""},null,8,Y),r(t("input",{type:"text",class:"form-control",placeholder:"\u5716\u7247\u7DB2\u5740","onUpdate:modelValue":o[0]||(o[0]=s=>e.innProduct.imageUrl=s)},null,512),[[p,e.innProduct.imageUrl]])]),t("div",null,[Z,(d(!0),c(b,null,w(e.innProduct.imagesUrl,(s,_)=>(d(),c("img",{class:"img-fluid",src:s,key:_,alt:""},null,8,tt))),128)),t("div",et,[r(t("input",{type:"text",class:"form-control",placeholder:"\u5716\u7247\u7DB2\u5740","onUpdate:modelValue":o[1]||(o[1]=s=>e.addImage=s)},null,512),[[p,e.addImage]]),t("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:o[2]||(o[2]=s=>e.innProduct.imagesUrl.push(e.addImage))},"\u65B0\u589E\u5716\u7247")])])]),t("div",ot,[t("div",st,u(e.innProduct.num),1),t("div",lt,[t("div",nt,[it,r(t("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":o[3]||(o[3]=s=>e.innProduct.category=s),placeholder:"\u8F38\u5165\u985E\u5225"},null,512),[[p,e.innProduct.category]])]),t("div",dt,[t("div",{class:"form-check form-switch",onClick:o[4]||(o[4]=s=>e.innProduct.is_enabled?e.innProduct.is_enabled=0:e.innProduct.is_enabled=1)},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_enabled",checked:e.innProduct.is_enabled===1},null,8,ct),e.innProduct.is_enabled===1?(d(),c("label",at,"\u986F\u793A")):(d(),c("label",rt,"\u96B1\u85CF"))])])]),t("div",ut,[t("div",pt,[ht,r(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":o[5]||(o[5]=s=>e.innProduct.title=s),placeholder:"\u8F38\u5165\u6A19\u984C"},null,512),[[p,e.innProduct.title]])]),t("div",_t,[t("div",mt,[r(t("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":o[6]||(o[6]=s=>e.innProduct.side=s),id:"single",value:"\u55AE\u9762"},null,512),[[M,e.innProduct.side]]),bt]),t("div",gt,[r(t("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":o[7]||(o[7]=s=>e.innProduct.side=s),id:"double",value:"\u96D9\u9762"},null,512),[[M,e.innProduct.side]]),ft])])]),t("div",Pt,[vt,r(t("input",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":o[8]||(o[8]=s=>e.innProduct.content=s),placeholder:"\u8F38\u5165\u7522\u54C1\u7C21\u8FF0"},null,512),[[p,e.innProduct.content]])]),t("div",yt,[kt,r(t("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":o[9]||(o[9]=s=>e.innProduct.description=s),placeholder:"\u8F38\u5165\u7522\u98F2\u4ECB\u7D39"},null,512),[[p,e.innProduct.description]])]),wt,t("div",Mt,[t("div",xt,[Ut,r(t("input",{type:"number",class:"form-control",id:"width","onUpdate:modelValue":o[10]||(o[10]=s=>e.innProduct.width=s),placeholder:"\u8F38\u5165\u5BEC"},null,512),[[p,e.innProduct.width,void 0,{number:!0}]])]),t("div",Vt,[Ct,r(t("input",{type:"number",class:"form-control",id:"height","onUpdate:modelValue":o[11]||(o[11]=s=>e.innProduct.height=s),placeholder:"\u8F38\u5165\u9AD8"},null,512),[[p,e.innProduct.height,void 0,{number:!0}]])])]),t("div",Nt,[t("div",$t,[It,r(t("input",{type:"text",class:"form-control",id:"material","onUpdate:modelValue":o[12]||(o[12]=s=>e.innProduct.material=s),placeholder:"\u8F38\u5165\u6750\u8CEA"},null,512),[[p,e.innProduct.material]])]),t("div",Lt,[Et,r(t("input",{type:"number",class:"form-control",id:"qty","onUpdate:modelValue":o[13]||(o[13]=s=>e.innProduct.p_qty=s),placeholder:"\u8F38\u5165\u6578\u91CF"},null,512),[[p,e.innProduct.p_qty,void 0,{number:!0}]])]),t("div",qt,[Bt,r(t("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":o[14]||(o[14]=s=>e.innProduct.unit=s),placeholder:"\u8F38\u5165\u55AE\u4F4D"},null,512),[[p,e.innProduct.unit]])])]),t("div",Dt,[t("div",At,[Ot,t("div",St,[Jt,r(t("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":o[15]||(o[15]=s=>e.innProduct.origin_price=s),placeholder:"\u8F38\u5165\u539F\u50F9"},null,512),[[p,e.innProduct.origin_price,void 0,{number:!0}]])])]),t("div",zt,[Ft,t("div",Tt,[jt,r(t("input",{type:"text",class:"form-control",id:"price","onUpdate:modelValue":o[16]||(o[16]=s=>e.innProduct.price=s),placeholder:"\u8F38\u5165\u552E\u50F9"},null,512),[[p,e.innProduct.price,void 0,{number:!0}]])])])])])])]),t("div",Rt,[Xt,t("button",{type:"button",class:"btn btn-primary",onClick:o[17]||(o[17]=s=>a.updateProduct(e.innProduct))},"\u5132\u5B58")])])])],512)}const Ht=g(S,[["render",Gt]]),Kt={data(){return{myModal:"",innProduct:{}}},props:["productItem"],watch:{productItem(){this.innProduct=this.productItem}},methods:{showModal(){this.myModal.show()},hideModal(){this.myModal.hide()},delProduct(l){this.$emit("delProduct",l)}},mounted(){this.myModal=new x(this.$refs.delModal),this.innProduct=this.productItem}},Qt={class:"modal fade",ref:"delModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Wt={class:"modal-dialog"},Yt={class:"modal-content"},Zt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"\u522A\u9664"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),te={class:"modal-body"},ee={class:"modal-footer"},oe=t("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"},"\u53D6\u6D88",-1);function se(l,o,n,h,e,a){return d(),c("div",Qt,[t("div",Wt,[t("div",Yt,[Zt,t("div",te," \u78BA\u5B9A\u8981\u522A\u9664 "+u(e.innProduct.title)+" ? ",1),t("div",ee,[oe,t("button",{type:"button",class:"btn btn-danger",onClick:o[0]||(o[0]=s=>a.delProduct(e.innProduct.id))},"\u522A\u9664")])])])],512)}const le=g(Kt,[["render",se]]),ne={data(){return{VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",isLoading:!0,isNew:!1,allProducts:[],product:{width:90,height:54,side:"single",material:"\u4E00\u7D1A\u5361",p_qty:300,imagesUrl:[]},pagination:{}}},components:{pagination:O,productModal:Ht,delProductModal:le},methods:{getProducts(l=1){const o=`${this.VUE_APP}/admin/products?page=${l}`;this.$http.get(o).then(n=>{this.isLoading=!1,this.allProducts=n.data.products,this.pagination=n.data.pagination}).catch(n=>{this.isLoading=!1,alert(n.response.data.message),this.$router.push("/login")})},updateProduct(l){const o={...l};let n=`${this.VUE_APP}/admin/product`,h="post";this.isNew||(h="put",n=`${n}/${l.id}`),this.$http[h](n,{data:o}).then(e=>{this.hideModal(),alert(e.data.message),this.getProducts()}).catch(e=>{alert(e.response.data.message)})},copyProduct(l){const o={...l},n=`${this.VUE_APP}/admin/product`;this.$http.post(n,{data:o}).then(h=>{this.getProducts()}).catch(h=>{alert(h.response.data.message)})},delProduct(l){const o=`${this.VUE_APP}/admin/product/${l}`;this.$http.delete(o).then(n=>{this.hideModal(),this.getProducts()}).catch(n=>{alert(n.response.data.message)})},openModal(l,o){l==="new"?(this.product={imagesUrl:[],side:"\u55AE\u9762",is_enabled:1},this.$refs.callModal.showModal(),this.isNew=!0):l==="edit"?(this.product={...o},this.$refs.callModal.showModal(),this.isNew=!1):l==="delete"&&(this.product={...o},this.$refs.callDelModal.showModal())},hideModal(){this.$refs.callModal.hideModal(),this.$refs.callDelModal.hideModal()}},mounted(){this.getProducts()}},ie={key:1,class:"container"},de={class:"text-end"},ce={class:"table"},ae=t("thead",null,[t("tr",null,[t("td",null,"No"),t("td",null,"\u985E\u5225"),t("td",null,"\u7522\u54C1\u540D\u7A31"),t("td",null,"\u55AE/\u96D9\u9762"),t("td",null,"\u5C3A\u5BF8"),t("td",null,"\u6750\u8CEA"),t("td",null,"\u6578\u91CF"),t("td",null,"\u552E\u50F9"),t("td",null,"\u986F\u793A"),t("td")])],-1),re=["src"],ue={class:"badge text-bg-secondary"},pe=t("br",null,null,-1),he=["onClick"],_e=["checked"],me={key:0,class:"form-check-label",for:"is_enabled"},be={key:1,class:"form-check-label",for:"is_enabled"},ge={class:"text-end"},fe=["onClick"],Pe=["onClick"],ve=["onClick"];function ye(l,o,n,h,e,a){const s=m("v-loading"),_=m("pagination"),U=m("productModal"),V=m("delProductModal");return d(),c(b,null,[e.isLoading?(d(),C(s,{key:0,active:e.isLoading},null,8,["active"])):(d(),c("div",ie,[t("div",de,[t("button",{type:"button",class:"btn btn-dark",onClick:o[0]||(o[0]=i=>a.openModal("new"))}," \u65B0\u589E ")]),t("table",ce,[ae,t("tbody",null,[(d(!0),c(b,null,w(e.allProducts,i=>(d(),c("tr",{key:i.id},[t("td",null,u(i.num),1),t("td",null,[t("img",{src:i.imageUrl,height:"100",alt:""},null,8,re)]),t("td",null,[t("span",ue,u(i.category),1),pe,k(" "+u(i.title),1)]),t("td",null,u(i.side),1),t("td",null,u(i.width)+" mm X "+u(i.height)+" mm",1),t("td",null,u(i.material),1),t("td",null,u(i.p_qty)+" "+u(i.unit),1),t("td",null,"$ "+u(i.price),1),t("td",null,[t("div",{class:"form-check form-switch",onClick:f=>{i.is_enabled?i.is_enabled=0:i.is_enabled=1,a.updateProduct(i)}},[t("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_enabled",checked:i.is_enabled===1},null,8,_e),i.is_enabled===1?(d(),c("label",me,"\u986F\u793A")):(d(),c("label",be,"\u96B1\u85CF"))],8,he)]),t("td",ge,[t("button",{type:"button",class:"btn btn-sm btn-outline-dark",onClick:f=>a.openModal("edit",i)}," \u7DE8\u8F2F",8,fe),k("\xA0 "),t("button",{type:"button",class:"btn btn-sm btn-outline-dark",onClick:f=>a.copyProduct(i)}," \u8907\u88FD",8,Pe),k("\xA0 "),t("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:f=>a.openModal("delete",i)}," \u522A\u9664 ",8,ve)])]))),128))])])])),y(_,{pages:e.pagination,onEmitPages:a.getProducts},null,8,["pages","onEmitPages"]),y(U,{"is-new":e.isNew,"product-item":e.product,ref:"callModal",onUpdateProduct:a.updateProduct},null,8,["is-new","product-item","onUpdateProduct"]),y(V,{"product-item":e.product,ref:"callDelModal",onDelProduct:a.delProduct},null,8,["product-item","onDelProduct"])],64)}const xe=g(ne,[["render",ye]]);export{xe as default};
